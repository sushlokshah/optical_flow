import numpy as np
import os
import pandas as pd


def evalute_kitti_error(path):
    list_of_files = sorted(os.listdir(path))
    # print(list_of_files)
    total_data = []
    for i in list_of_files:
        if(i[-4:] == ".txt"):
            current_data = np.loadtxt(path + "/" + i)  
            total_data.append(current_data)
    total_data = np.array(total_data).reshape(-1,7)
    data = {"errors_bg" : total_data[:,1],
            "errors_fg" : total_data[:,3],
            "errors_all": total_data[:,5]
            }
    df = pd.DataFrame.from_dict(data)
    df.to_csv(path + "/error_data.csv")
    print(df.describe())

if __name__ == "__main__":
    Methods_list = [
        "Farneback_flow",
    "Farneback_flow_Fast_features",
    "lucas_kanade_GoodFeaturesToTrack",
    "Farneback_flow_GoodFeaturesToTrack"  ,
    "spynet",
    "flownet2",
    "spynet_Fast_features",
    "flownet2_Fast_features",
    "spynet_GoodFeaturesToTrack",
    "flownet2_GoodFeaturesToTrack",
    "lucas_kanade_Fast_features"
    ]
    
    for method in Methods_list:
        print(method)
        evalute_kitti_error("results/"+ method +"/errors_flow_noc")



# Farneback_flow
#         errors_bg   errors_fg  errors_all
# count  200.000000  200.000000  200.000000
# mean     0.460041    0.488326    0.485029
# std      0.243287    0.367294    0.210512
# min      0.023290    0.000000    0.030093
# 25%      0.265830    0.116872    0.317187
# 50%      0.487022    0.420376    0.523341
# 75%      0.659404    0.859601    0.658079
# max      0.980276    1.000000    0.920838
# Farneback_flow_Fast_features
#         errors_bg   errors_fg  errors_all
# count  200.000000  200.000000  200.000000
# mean     0.341813    0.438262    0.365302
# std      0.251999    0.365651    0.224609
# min      0.002208    0.000000    0.009683
# 25%      0.090733    0.067817    0.149438
# 50%      0.330839    0.378667    0.377902
# 75%      0.575248    0.790381    0.557685
# max      0.842613    1.000000    0.807545
# lucas_kanade_GoodFeaturesToTrack
#         errors_bg   errors_fg  errors_all
# count  200.000000  200.000000  200.000000
# mean     0.281107    0.385090    0.327692
# std      0.232847    0.316946    0.217038
# min      0.000000    0.000000    0.000000
# 25%      0.080419    0.082500    0.148365
# 50%      0.235294    0.358722    0.306187
# 75%      0.439241    0.637987    0.500000
# max      0.941176    1.000000    0.886364
# Farneback_flow_GoodFeaturesToTrack
#         errors_bg   errors_fg  errors_all
# count  200.000000  200.000000  200.000000
# mean     0.247211    0.407581    0.312493
# std      0.222325    0.372110    0.226448
# min      0.000000    0.000000    0.000000
# 25%      0.055181    0.047078    0.105780
# 50%      0.189177    0.285714    0.287594
# 75%      0.390375    0.724353    0.494612
# max      0.847619    1.000000    0.862069
# spynet
#         errors_bg   errors_fg  errors_all
# count  200.000000  200.000000  200.000000
# mean     0.785631    0.844786    0.822671
# std      0.347798    0.283122    0.254070
# min      0.000000    0.000000    0.096474
# 25%      0.855433    0.806115    0.829125
# 50%      0.955406    0.999923    0.947741
# 75%      0.977484    1.000000    0.974007
# max      1.000000    1.000000    1.000000
# flownet2
#         errors_bg   errors_fg  errors_all
# count  200.000000  200.000000  200.000000
# mean     0.404168    0.291035    0.401889
# std      0.246517    0.268710    0.214976
# min      0.006096    0.000000    0.009995
# 25%      0.178090    0.063537    0.221630
# 50%      0.492532    0.200453    0.462199
# 75%      0.607793    0.471405    0.583487
# max      0.962182    0.968887    0.879680
# spynet_Fast_features
#         errors_bg   errors_fg  errors_all
# count  200.000000  200.000000  200.000000
# mean     0.771200    0.836165    0.796209
# std      0.348382    0.279312    0.266805
# min      0.000000    0.000000    0.090147
# 25%      0.791172    0.784969    0.754255
# 50%      0.947133    1.000000    0.934247
# 75%      0.974513    1.000000    0.965105
# max      1.000000    1.000000    1.000000
# flownet2_Fast_features
#         errors_bg   errors_fg  errors_all
# count  200.000000  200.000000  200.000000
# mean     0.375427    0.309533    0.371499
# std      0.255564    0.243436    0.220506
# min      0.002208    0.000000    0.009557
# 25%      0.078301    0.104455    0.143560
# 50%      0.440972    0.256883    0.422228
# 75%      0.609130    0.501221    0.567998
# max      0.909091    0.949686    0.754476
# spynet_GoodFeaturesToTrack
#         errors_bg   errors_fg  errors_all
# count  200.000000  200.000000  200.000000
# mean     0.701375    0.825497    0.774810
# std      0.354716    0.289310    0.211266
# min      0.000000    0.000000    0.135802
# 25%      0.584952    0.741516    0.642625
# 50%      0.860859    1.000000    0.845010
# 75%      0.953256    1.000000    0.947825
# max      1.000000    1.000000    1.000000
# flownet2_GoodFeaturesToTrack
#         errors_bg   errors_fg  errors_all
# count  200.000000  200.000000  200.000000
# mean     0.246722    0.307608    0.273567
# std      0.205861    0.256934    0.179618
# min      0.000000    0.000000    0.000000
# 25%      0.053698    0.095238    0.123402
# 50%      0.207135    0.229670    0.242571
# 75%      0.420761    0.500000    0.423544
# max      0.757282    1.000000    0.700000
# lucas_kanade_Fast_features
#         errors_bg   errors_fg  errors_all
# count  200.000000  200.000000  200.000000
# mean     0.373729    0.405791    0.387418
# std      0.248128    0.305098    0.217054
# min      0.004415    0.000000    0.011005
# 25%      0.106440    0.119615    0.182131
# 50%      0.392846    0.378514    0.394595
# 75%      0.612902    0.674480    0.580682
# max      0.909091    1.000000    0.797543










# Farneback_flow
#         errors_bg   errors_fg  errors_all
# count  200.000000  200.000000  200.000000
# mean     0.460041    0.488326    0.485029
# std      0.243287    0.367294    0.210512
# min      0.023290    0.000000    0.030093
# 25%      0.265830    0.116872    0.317187
# 50%      0.487022    0.420376    0.523341
# 75%      0.659404    0.859601    0.658079
# max      0.980276    1.000000    0.920838
# Farneback_flow_Fast_features
#         errors_bg   errors_fg  errors_all
# count  200.000000  200.000000  200.000000
# mean     0.284367    0.418251    0.329268
# std      0.233409    0.364831    0.213660
# min      0.000000    0.000000    0.003215
# 25%      0.056521    0.055528    0.143346
# 50%      0.249204    0.360804    0.317434
# 75%      0.484772    0.753304    0.513603
# max      0.841530    1.000000    0.795276
# lucas_kanade_GoodFeaturesToTrack
#         errors_bg   errors_fg  errors_all
# count  200.000000  200.000000  200.000000
# mean     0.281107    0.385090    0.327692
# std      0.232847    0.316946    0.217038
# min      0.000000    0.000000    0.000000
# 25%      0.080419    0.082500    0.148365
# 50%      0.235294    0.358722    0.306187
# 75%      0.439241    0.637987    0.500000
# max      0.941176    1.000000    0.886364
# Farneback_flow_GoodFeaturesToTrack
#         errors_bg   errors_fg  errors_all
# count  200.000000  200.000000  200.000000
# mean     0.247211    0.407581    0.312493
# std      0.222325    0.372110    0.226448
# min      0.000000    0.000000    0.000000
# 25%      0.055181    0.047078    0.105780
# 50%      0.189177    0.285714    0.287594
# 75%      0.390375    0.724353    0.494612
# max      0.847619    1.000000    0.862069
# spynet
#         errors_bg   errors_fg  errors_all
# count  200.000000  200.000000  200.000000
# mean     0.785631    0.844786    0.822671
# std      0.347798    0.283122    0.254070
# min      0.000000    0.000000    0.096474
# 25%      0.855433    0.806115    0.829125
# 50%      0.955406    0.999923    0.947741
# 75%      0.977484    1.000000    0.974007
# max      1.000000    1.000000    1.000000
# flownet2
#         errors_bg   errors_fg  errors_all
# count  200.000000  200.000000  200.000000
# mean     0.404168    0.291035    0.401889
# std      0.246517    0.268710    0.214976
# min      0.006096    0.000000    0.009995
# 25%      0.178090    0.063537    0.221630
# 50%      0.492532    0.200453    0.462199
# 75%      0.607793    0.471405    0.583487
# max      0.962182    0.968887    0.879680
# spynet_Fast_features
#         errors_bg   errors_fg  errors_all
# count  200.000000  200.000000  200.000000
# mean     0.731598    0.829460    0.789324
# std      0.353118    0.282914    0.216660
# min      0.000000    0.000000    0.145078
# 25%      0.687721    0.777406    0.651986
# 50%      0.911171    1.000000    0.883789
# 75%      0.957174    1.000000    0.952156
# max      1.000000    1.000000    1.000000
# flownet2_Fast_features
#         errors_bg   errors_fg  errors_all
# count  200.000000  200.000000  200.000000
# mean     0.294014    0.311999    0.306688
# std      0.222294    0.243471    0.183745
# min      0.000000    0.000000    0.000000
# 25%      0.042731    0.118856    0.135542
# 50%      0.286026    0.259301    0.302427
# 75%      0.496739    0.501000    0.472462
# max      0.748634    1.000000    0.667590
# spynet_GoodFeaturesToTrack
#         errors_bg   errors_fg  errors_all
# count  200.000000  200.000000  200.000000
# mean     0.701375    0.825497    0.774810
# std      0.354716    0.289310    0.211266
# min      0.000000    0.000000    0.135802
# 25%      0.584952    0.741516    0.642625
# 50%      0.860859    1.000000    0.845010
# 75%      0.953256    1.000000    0.947825
# max      1.000000    1.000000    1.000000
# flownet2_GoodFeaturesToTrack
#         errors_bg   errors_fg  errors_all
# count  200.000000  200.000000  200.000000
# mean     0.246722    0.307608    0.273567
# std      0.205861    0.256934    0.179618
# min      0.000000    0.000000    0.000000
# 25%      0.053698    0.095238    0.123402
# 50%      0.207135    0.229670    0.242571
# 75%      0.420761    0.500000    0.423544
# max      0.757282    1.000000    0.700000
# lucas_kanade_Fast_features
#         errors_bg   errors_fg  errors_all
# count  200.000000  200.000000  200.000000
# mean     0.313276    0.389140    0.343430
# std      0.229144    0.306364    0.202523
# min      0.000000    0.000000    0.000000
# 25%      0.083048    0.075764    0.172840
# 50%      0.294664    0.363654    0.325302
# 75%      0.518889    0.636903    0.528873
# max      0.896175    1.000000    0.847397









# Farneback_flow
#         errors_bg   errors_fg  errors_all
# count  200.000000  200.000000  200.000000
# mean     0.460041    0.488326    0.485029
# std      0.243287    0.367294    0.210512
# min      0.023290    0.000000    0.030093
# 25%      0.265830    0.116872    0.317187
# 50%      0.487022    0.420376    0.523341
# 75%      0.659404    0.859601    0.658079
# max      0.980276    1.000000    0.920838
# Farneback_flow_Fast_features
#         errors_bg   errors_fg  errors_all
# count  200.000000  200.000000  200.000000
# mean     0.248107    0.404801    0.310294
# std      0.219682    0.368700    0.222887
# min      0.000000    0.000000    0.000000
# 25%      0.063497    0.047160    0.114261
# 50%      0.188344    0.305807    0.280489
# 75%      0.387338    0.711362    0.500000
# max      0.844262    1.000000    0.766667
# lucas_kanade_GoodFeaturesToTrack
#         errors_bg   errors_fg  errors_all
# count  200.000000  200.000000  200.000000
# mean     0.281107    0.385090    0.327692
# std      0.232847    0.316946    0.217038
# min      0.000000    0.000000    0.000000
# 25%      0.080419    0.082500    0.148365
# 50%      0.235294    0.358722    0.306187
# 75%      0.439241    0.637987    0.500000
# max      0.941176    1.000000    0.886364
# Farneback_flow_GoodFeaturesToTrack
#         errors_bg   errors_fg  errors_all
# count  200.000000  200.000000  200.000000
# mean     0.247211    0.407581    0.312493
# std      0.222325    0.372110    0.226448
# min      0.000000    0.000000    0.000000
# 25%      0.055181    0.047078    0.105780
# 50%      0.189177    0.285714    0.287594
# 75%      0.390375    0.724353    0.494612
# max      0.847619    1.000000    0.862069
# spynet
#         errors_bg   errors_fg  errors_all
# count  200.000000  200.000000  200.000000
# mean     0.785631    0.844786    0.822671
# std      0.347798    0.283122    0.254070
# min      0.000000    0.000000    0.096474
# 25%      0.855433    0.806115    0.829125
# 50%      0.955406    0.999923    0.947741
# 75%      0.977484    1.000000    0.974007
# max      1.000000    1.000000    1.000000
# flownet2
#         errors_bg   errors_fg  errors_all
# count  200.000000  200.000000  200.000000
# mean     0.404168    0.291035    0.401889
# std      0.246517    0.268710    0.214976
# min      0.006096    0.000000    0.009995
# 25%      0.178090    0.063537    0.221630
# 50%      0.492532    0.200453    0.462199
# 75%      0.607793    0.471405    0.583487
# max      0.962182    0.968887    0.879680
# spynet_Fast_features
#         errors_bg   errors_fg  errors_all
# count  200.000000  200.000000  200.000000
# mean     0.700655    0.825651    0.777431
# std      0.351992    0.290328    0.203551
# min      0.000000    0.000000    0.103448
# 25%      0.619078    0.770621    0.656923
# 50%      0.865849    1.000000    0.835481
# 75%      0.946185    1.000000    0.947757
# max      1.000000    1.000000    1.000000
# flownet2_Fast_features
#         errors_bg   errors_fg  errors_all
# count  200.000000  200.000000  200.000000
# mean     0.257574    0.311923    0.280760
# std      0.210674    0.252704    0.179507
# min      0.000000    0.000000    0.000000
# 25%      0.054254    0.104530    0.126319
# 50%      0.221970    0.234086    0.263331
# 75%      0.429762    0.516572    0.432322
# max      0.740458    1.000000    0.675393
# spynet_GoodFeaturesToTrack
#         errors_bg   errors_fg  errors_all
# count  200.000000  200.000000  200.000000
# mean     0.701375    0.825497    0.774810
# std      0.354716    0.289310    0.211266
# min      0.000000    0.000000    0.135802
# 25%      0.584952    0.741516    0.642625
# 50%      0.860859    1.000000    0.845010
# 75%      0.953256    1.000000    0.947825
# max      1.000000    1.000000    1.000000
# flownet2_GoodFeaturesToTrack
#         errors_bg   errors_fg  errors_all
# count  200.000000  200.000000  200.000000
# mean     0.246722    0.307608    0.273567
# std      0.205861    0.256934    0.179618
# min      0.000000    0.000000    0.000000
# 25%      0.053698    0.095238    0.123402
# 50%      0.207135    0.229670    0.242571
# 75%      0.420761    0.500000    0.423544
# max      0.757282    1.000000    0.700000
# lucas_kanade_Fast_features
#         errors_bg   errors_fg  errors_all
# count  200.000000  200.000000  200.000000
# mean     0.277160    0.377749    0.321576
# std      0.225065    0.309153    0.208366
# min      0.000000    0.000000    0.000000
# 25%      0.082661    0.078629    0.138443
# 50%      0.212860    0.341784    0.300210
# 75%      0.428850    0.614513    0.491640
# max      0.901961    1.000000    0.877729